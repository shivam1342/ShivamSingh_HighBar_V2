# Kasparro Agentic FB Analyst Configuration

# Python & Reproducibility
python_version: "3.10"
random_seed: 42

# LLM Configuration - Groq API
# Get free API key from: https://console.groq.com/keys
llm:
  model: "llama-3.3-70b-versatile"
  api_key: ""  # Set environment variable: LLM_API_KEY (recommended)
  temperature: 0.5
  max_tokens: 1500
  timeout: 60  # Request timeout in seconds

# Data Configuration
data:
  csv_path: "synthetic_fb_ads_undergarments.csv"
  use_sample: false
  sample_size: 1000

# Agent Thresholds
thresholds:
  # Evaluator thresholds
  confidence_min: 0.6
  quality_score_min: 0.7
  
  evaluator:
    min_evidence_count: 2
    
    # Adaptive rules: adjust based on data quality
    adaptive:
      # Confidence threshold adjustments
      volatile_confidence_multiplier: 0.7   # Lower for volatile data: 0.6 → 0.42
      stable_confidence_multiplier: 1.2     # Raise for stable data: 0.6 → 0.72
      
      # Quality threshold adjustments
      volatile_quality_multiplier: 0.85     # Lower for volatile: 0.7 → 0.595
      stable_quality_multiplier: 1.1        # Raise for stable: 0.7 → 0.77
      
      # Evidence requirements
      volatile_extra_evidence: 1            # Require more evidence for volatile data
  
  # Planner thresholds (adaptive)
  planner:
    default_underperformer_threshold: 0.01  # For CTR, CVR
    default_roas_threshold: 1.0
    
    # Adaptive rules: adjust based on data quality
    adaptive:
      # When coefficient of variation (CV = std/mean) is high, lower threshold
      high_variance_multiplier: 0.7   # Lower threshold by 30%
      low_variance_multiplier: 1.2    # Raise threshold by 20%
      
      # CV thresholds to trigger adaptation
      high_variance_cv: 0.5   # CV > 0.5 = high variance
      low_variance_cv: 0.2    # CV < 0.2 = low variance
  
  # General analysis thresholds
  roas_change_threshold: 0.15
  min_spend_for_analysis: 100

# Output Configuration
outputs:
  reports_dir: "reports"
  logs_dir: "logs"
  insights_file: "reports/insights.json"
  creatives_file: "reports/creatives.json"
  report_file: "reports/report.md"

# Logging
logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR
  format: "json"
  file: "logs/execution.jsonl"
